name: PR Auto Comment

on:
  pull_request:
    types: [opened, reopened]

jobs:
  comment:
    runs-on: ubuntu-latest

    steps:
      - name: Add PR Comment
        uses: actions/github-script@v7
        with:
          script: |
            const prComment = `
            ## ğŸ‰ ìƒˆë¡œìš´ Pull Requestê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

            ì•ˆë…•í•˜ì„¸ìš” @${{ github.actor }}ë‹˜! PRì„ ìƒì„±í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

            ### ğŸ“‹ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸
            ë¦¬ë·°ì–´ëŠ” ë‹¤ìŒ ì‚¬í•­ë“¤ì„ í™•ì¸í•´ ì£¼ì„¸ìš”:

            - [ ] ì½”ë“œê°€ í”„ë¡œì íŠ¸ ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë”°ë¥´ëŠ”ê°€?
            - [ ] ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ê°€?
            - [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ê°€?
            - [ ] Breaking changesê°€ ìˆë‹¤ë©´ ë¬¸ì„œí™”ë˜ì–´ ìˆëŠ”ê°€?
            - [ ] ë³´ì•ˆìƒ ë¬¸ì œê°€ ì—†ëŠ”ê°€?

            ### ğŸ§ª í…ŒìŠ¤íŠ¸ í˜„í™©
            - ìë™ í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.
            - í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ [Tests] íƒ­ì—ì„œ ìì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

            ### ğŸ“– ì¶”ê°€ ì •ë³´
            - [ê°œë°œ ê°€ì´ë“œë¼ì¸](.cursor/rules/development-policy.mdc)
            - [GitHub ê´€ë¦¬ ê·œì¹™](.cursor/rules/github-management.mdc)

            ë¦¬ë·° ì™„ë£Œ í›„ ìŠ¹ì¸í•´ ì£¼ì‹œë©´ 24ì‹œê°„ ë‚´ì— ë¨¸ì§€ë  ì˜ˆì •ì…ë‹ˆë‹¤.

            ---
            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
            `;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: prComment
            });

      - name: Add Test Status Comment
        uses: actions/github-script@v7
        with:
          script: |
            const testStatusComment = `
            ## ğŸ”„ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...

            í˜„ì¬ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë“¤ì´ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤:
            - Backend í…ŒìŠ¤íŠ¸ (Python 3.9, 3.10, 3.11)
            - Frontend í…ŒìŠ¤íŠ¸
            - ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë¶„ì„

            ê²°ê³¼ëŠ” ê³§ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. â³
            `;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: testStatusComment
            });
